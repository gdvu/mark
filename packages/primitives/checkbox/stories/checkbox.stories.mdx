import { ArgsTable, Story, Canvas, Meta } from '@storybook/addon-docs';
import { useState, useEffect } from 'react';
import useCheckbox from '@raddix/checkbox';
import './checkbox.css';

<Meta title='Inputs/useCheckbox' />

<!--- Component template -->

export const Checkbox = props => {
  const { checkboxProps, state } = useCheckbox.Root(props);
  const { checkboxIndicatorProps } = useCheckbox.Indicator(state);
  return (
    <button {...checkboxProps} className='checkbox'>
      <span {...checkboxIndicatorProps} className='checkbox-indicator'></span>
    </button>
  );
};

# useCheckbox

<Canvas>
  <Story
    name='Overview'
    parameters={{
      layout: 'centered'
    }}
  >
    <Checkbox />
  </Story>
</Canvas>

## Features

- Full support for browser features.
- Full keyboard navigation.
- Indeterminate state support.
- Can be controlled or uncontrolled.

## Installation

Install the primitive from your command line.

```sh
yarn add @raddix/checkbox
```

## Anatomy

Import all or parts of <code>@raddix/checkbox</code>

```jsx
import useCheckbox from '@raddix/checkbox';

const Checkbox = props => {
  const { checkboxProps, state } = useCheckbox.Root(props);
  const { checkboxIndicatorProps } = useCheckbox.Indicator(state);

  return (
    <button {...checkboxProps} className='checkbox'>
      <span {...checkboxIndicatorProps} className='checkbox-indicator'></span>
    </button>
  );
};
```

## Usage

### Default Checked

<Canvas>
  <Story name='Default Checked'>
    <Checkbox defaultChecked />
  </Story>
</Canvas>

### Indeterminate

<!--- Component Indeterminate -->

export const IndeterminateGroup = () => {
  const [listState, setListState] = useState([false, false]);
  const allChecked = listState.every(Boolean);
  const isIndeterminate = listState.some(Boolean) && !allChecked;
  return (
    <div>
      <Checkbox
        indeterminate={isIndeterminate}
        checked={allChecked}
        onChecked={e => setListState([e, e])}
      />
      <div className='container'>
        <div className='item'>
          <Checkbox
            checked={listState[0]}
            onChecked={e => {
              setListState([e, listState[1]]);
            }}
          />
          <span>React</span>
        </div>
        <div className='item'>
          <Checkbox
            checked={listState[1]}
            onChecked={e => {
              setListState([listState[0], e]);
            }}
          />
          <span>Angular</span>
        </div>
      </div>
    </div>
  );
};

export const IndeterminateButton = () => {
  const [indeterminate, setIndeterminate] = useState(false);
  return (
    <div className='item'>
      <Checkbox
        indeterminate={indeterminate}
        onIndeterminate={setIndeterminate}
      />
      <button
        className='btn'
        onClick={() => {
          setIndeterminate(true);
          console.log('Yes');
        }}
      >
        Indeterminate
      </button>
    </div>
  );
};

<Canvas>
  <Story name='Indeterminate'>
    <IndeterminateGroup />
    <br />
    <hr />
    <br />
    <IndeterminateButton />
  </Story>
</Canvas>
